# coding=utf-8
import time
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BCM)

# Hier können die jeweiligen Eingangs-/Ausgangspins ausgewählt werden
Trigger_AusgangsPin = 17
Echo_EingangsPin = 27

# Pause zwischen den einzelnen Messugnen in Sekunden
sleeptime = 0.8
GPIO.setup(Trigger_AusgangsPin, GPIO.OUT)
GPIO.setup(Echo_EingangsPin, GPIO.IN)
GPIO.output(Trigger_AusgangsPin, False)

# Hauptprogrammschleife
try:
     while True:
 # Abstandsmessung mittels des 10us langen Triggersignals
         GPIO.output(Trigger_AusgangsPin, True)
         time.sleep(0.00001)
         GPIO.output(Trigger_AusgangsPin, False)
 # Hier wird die Stopuhr gestartet
         EinschaltZeit = time.time()
         while GPIO.input(Echo_EingangsPin) == 0:
         EinschaltZeit = time.time() 
         while GPIO.input(Echo_EingangsPin) == 1:
         AusschaltZeit = time.time() 
 # Die Differenz der beiden Zeiten ergibt die gesuchte Dauer
         Dauer = AusschaltZeit - EinschaltZeit
 # Berechne Abstand auf Basis der Schallgeschwindigkeit
         Abstand = (Dauer * 34300) / 2
 # Überprüfung, ob gemessener Wert innerhalb der zulässigen Entfernung
         if Abstand < 2 or (round(Abstand) > 300):
 # Falls nicht wird eine Fehlermeldung ausgegeben
             print("Abstand außerhalb des Messbereich")
             print("------------------------------")

